---
import type { CollectionEntry } from 'astro:content'

interface Props {
  project: CollectionEntry<'projects'>
}

const { project } = Astro.props
const { title, venue, authors, tags, links, thumbnail } = project.data

// Function to bold Amey Agrawal in author list
const formatAuthors = (authorString: string) => {
  return authorString.replace(/Amey Agrawal/g, '<strong>Amey Agrawal</strong>')
}
---

<article class="project-item">
  <div class="project-header">
    <span class="project-marker">::</span>
    <h3 class="project-title">
      {links?.pdf ? (
        <a href={links.pdf} target="_blank" rel="noopener noreferrer" class="title-link">
          {title}
        </a>
      ) : (
        title
      )}
    </h3>
  </div>
  <div class="project-body">
    <div class="authors" set:html={formatAuthors(authors)}></div>
    {venue && <div class="venue">Â» {venue}</div>}
    {links && (
      <div class="project-links">
        {links.pdf && <a href={links.pdf} target="_blank" rel="noopener noreferrer">[PDF]</a>}
        {links.code && <a href={links.code} target="_blank" rel="noopener noreferrer">[Code]</a>}
        {links.video && <a href={links.video} target="_blank" rel="noopener noreferrer">[Video]</a>}
        {links.slides && <a href={links.slides} target="_blank" rel="noopener noreferrer">[Slides]</a>}
        {links.website && <a href={links.website} target="_blank" rel="noopener noreferrer">[Website]</a>}
      </div>
    )}
  </div>
</article>

<style>
  .project-item {
    margin-bottom: 1.5rem;
    font-family: var(--font-mono);
    position: relative;
  }

  .project-header {
    display: flex;
    align-items: baseline;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
  }

  .project-marker {
    color: var(--theme-accent);
    font-weight: bold;
  }

  .project-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--theme-text);
    margin: 0;
    line-height: 1.4;
  }

  .title-link {
    color: inherit;
    text-decoration: none;
    transition: color 0.2s ease;
  }

  .title-link:hover {
    color: var(--theme-accent);
    text-decoration: underline;
  }

  .project-body {
    display: flex;
    flex-direction: column;
    gap: 0.375rem;
    padding-left: 1.5rem;
  }

  .authors {
    font-size: 0.9rem;
    color: var(--theme-text-subtle);
    line-height: 1.5;
    margin-bottom: 0.25rem;
  }

  .authors :global(strong) {
    color: var(--theme-accent);
    font-weight: 600;
  }

  .venue {
    font-size: 0.9rem;
    color: var(--theme-accent);
    opacity: 0.9;
    font-weight: 500;
  }

  .project-links {
    display: flex;
    gap: 0.75rem;
    margin-top: 0.25rem;
    font-size: 0.85rem;
  }

  .project-links a {
    color: var(--theme-text-subtle);
    text-decoration: none;
    opacity: 0.7;
    transition: opacity 0.2s ease, color 0.2s ease;
  }

  .project-links a:hover {
    color: var(--theme-accent);
    opacity: 1;
    text-decoration: underline;
  }

  @media (max-width: 768px) {
    .project-body {
      padding-left: 1.25rem;
    }
  }
</style>